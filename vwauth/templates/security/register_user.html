{% from "security/_macros.html" import render_field_with_errors, render_field %}

{% extends "layout.html" %}
{% set form = register_user_form %}
{% block content %}
<div class="row">
  <div class="col-xs-12 col-sm-offset-3 col-sm-6 col-md-offset-3 col-md-6 col-lg-offset-3 col-lg-6">
    <h3>User Registration</h3>
    <p>
      By creating an account, we can enable your shared data to better
      reach its audience, increasing the likelihood that you get cited for
      your data! This step is required for obtaining a DOI for your data,
      as well as making your data available for <a href="/search">search</a>
      when you link or upload your data to the virtual watershed platform.
    </p>
    <p>
    Already have an account? <a href={{ url_for_security('login') }}>Log in</a>
    </p>

      <div class="well">

          <form id="registrationForm" method="POST" action="{{url_for_security("register")}}">
              {{ form.csrf_token }}

              <div class="form-group {% if form.errors.name %} has-error {% endif %}">
                  <label for="name" class="control-label">{{form.name.label}}</label>
                  <input type="text" class="form-control" id="name" name="name">
                  {% if form.errors.name %}
                    {% for err in form.errors.name%}
                    <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>
              <div class="form-group {% if form.errors.affiliation %} has-error {% endif %}">
                  <label for="affiliation" class="control-label">{{form.affiliation.label}}</label>
                  <input type="text" class="form-control" id="affiliation" name="affiliation">
                  {% if form.errors.affiliation %}
                    {% for err in form.errors.affiliation%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>
              <div class="form-group {% if form.errors.state %} has-error {% endif %}">
                  <label for="state" class="control-label">{{form.state.label}}</label>
                  <input type="text" class="form-control" id="state" name="state">
                  {% if form.errors.state %}
                    {% for err in form.errors.state%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>
              <div class="form-group {% if form.errors.city %} has-error {% endif %}">
                  <label for="city" class="control-label">{{form.city.label}}</label>
                  <input type="text" class="form-control" id="city" name="city">
                  {% if form.errors.city %}
                    {% for err in form.errors.city%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>

              <div class="form-group {% if form.errors.email %} has-error {% endif %}">
                  <label for="email" class="control-label">{{form.email.label}}</label>
                  <input type="text" class="form-control" id="email" name="email">
                  {% if form.errors.email %}
                    {% for err in form.errors.email%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>
              <div class="form-group {% if form.errors.password %} has-error {% endif %}">
                  <label for="password" class="control-label">{{form.password.label}}</label>
                  <input type="password" class="form-control" id="password" name="password">
                  {% if form.errors.password %}
                    {% for err in form.errors.password%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>
              {#<div class="form-group {% if form.errors.confirm %} has-error {% endif %}">
                  <label for="confirm" class="control-label">{{form.confirm.label}}</label>
                  <input type="password" class="form-control" id="confirm" name="confirm">
                  {% if form.errors.confirm %}
                    {% for err in form.errors.confirm%}
                      <span class="help-block">{{err}}</span>
                    {% endfor %}
                  {% endif %}
              </div>#}


              <button type="submit" class="btn btn-success btn-block">Finish</button>
          </form>

      </div>
  </div>

</div>

{% endblock %}
